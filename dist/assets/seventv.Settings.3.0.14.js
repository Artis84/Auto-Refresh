var B=Object.defineProperty;var U=(s,e,t)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(U(s,typeof e!="symbol"?e+"":e,t),t);import{aQ as j,i as A,p as q,a as V,_ as m,l as r,f as a,j as c,e as y,a1 as H,u as h,y as M,z,x as F,F as $,m as T,s as G,k as g,q as P,aB as Q,W as K,A as W,B as Y,$ as N,aL as k}from"./seventv.index.3.0.14.js";import{a as I,L as X,u,c as R,r as w,t as f,_ as L,m as Z}from"./seventv.useUserAgent.3.0.14.js";import{u as J}from"./seventv.main.3.0.14.js";import{S as ee,a as D,C as te}from"./seventv.StoreSubscribeButton.3.0.14.js";import{b as se}from"./seventv.seventv.user.gql.3.0.14.js";import{o as ne}from"./seventv.index.3.0.142.js";import{j as oe}from"./seventv.index.3.0.143.js";const x={api:"https://egvault.7tv.io/v1"},re=j("egvault",{state:()=>({subscription:null,products:[],currentProduct:null,currentPlan:null}),getters:{subscribed:s=>{var e;return((e=s.subscription)==null?void 0:e.active)??!1},subEndDate:s=>{var e;return(e=s.subscription)!=null&&e.end_at?new Date(s.subscription.end_at):new Date(0)},subProduct:s=>s.products.find(e=>e.name==="subscription")},actions:{async fetchSub(s){const t=await(await fetch(`${x.api}/subscriptions/${s}`,{})).json();return this.subscription=t,t},async fetchProducts(){const e=await(await fetch(x.api+"/products")).json();return this.products=e,e}}}),E=Symbol("ActorContext");class ae{constructor(){i(this,"user",null);i(this,"sub",null);i(this,"platform",null);i(this,"platformUserID",null);i(this,"query",null)}setPlatformUserID(e,t){this.platform=e,this.platformUserID=t}openAuthorizeWindow(e){if(this.user)return;const t=window.open(`https://7tv.io/v3/auth?platform=${e}`,"7TV Auth","width=500,height=600");if(!t)return;const n=setInterval(()=>{var l;t.closed&&((l=this.query)==null||l.refetch(),clearInterval(n))},100)}logout(){fetch("https://7tv.io/v3/auth/logout",{method:"POST",credentials:"include"}).then(e=>{e.ok&&(this.user=null)})}}function ie(){const s=re();let e=A(E,null);return e||(e=I(new ae),e.query=ne(se,{},{}),e.query.onResult(t=>{var n;(n=t==null?void 0:t.data)!=null&&n.user&&(e.user=structuredClone(X(t.data.user)))}),q(E,e),V(()=>e.platformUserID,t=>{!t||!e.query||e.query.load(e.query.document.value,{id:e.platformUserID,platform:e.platform})},{immediate:!0}),V(()=>{var t;return(t=e.user)==null?void 0:t.id},t=>{t&&s.fetchSub(t).then(n=>{!n||!n.active||(e.sub=n)}).catch(()=>{})})),e}const ce={},ue={width:"9",height:"6",viewBox:"0 0 9 6",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},le=c("path",{d:"M0.221974 4.46565L3.93498 0.251908C4.0157 0.160305 4.10314 0.0955723 4.19731 0.0577097C4.29148 0.0192364 4.39238 5.49454e-08 4.5 5.3662e-08C4.60762 5.23786e-08 4.70852 0.0192364 4.80269 0.0577097C4.89686 0.0955723 4.9843 0.160305 5.06502 0.251908L8.77803 4.46565C8.92601 4.63359 9 4.84733 9 5.10687C9 5.36641 8.92601 5.58015 8.77803 5.74809C8.63005 5.91603 8.4417 6 8.213 6C7.98431 6 7.79596 5.91603 7.64798 5.74809L4.5 2.17557L1.35202 5.74809C1.20404 5.91603 1.0157 6 0.786996 6C0.558296 6 0.369956 5.91603 0.221974 5.74809C0.0739918 5.58015 6.39938e-08 5.36641 6.08988e-08 5.10687C5.78038e-08 4.84733 0.0739918 4.63359 0.221974 4.46565Z"},null,-1),_e=[le];function de(s,e){return r(),a("svg",ue,_e)}const at=m(ce,[["render",de]]),pe=s=>(M("data-v-a02322cc"),s=s(),z(),s),me={class:"seventv-settings-compat"},fe=pe(()=>c("h3",null,[F(" Compatibility "),c("p",null,"Scan your extensions for compatibility issues")],-1)),he=["src"],ve=y({__name:"SettingsViewCompat",setup(s){const{browser:e}=R(),t=A(H,""),n=e.name!=="Firefox";return n||window.open(t+"#/compat","_blank"),(l,_)=>(r(),a("main",me,[fe,n?(r(),a("iframe",{key:0,src:u(t)+"#/compat?noheader=1"},null,8,he)):h("",!0)]))}});const ge=m(ve,[["__scopeId","data-v-a02322cc"]]),we=["sticky"],ye=["id"],Se=y({__name:"SettingsViewConfigCat",props:{name:{},nodes:{}},setup(s,{expose:e}){const t=s,n=O(),l=w(new Set(t.nodes.map(o=>o.key).filter(o=>!n.seen.includes(o)))),_=w(!1),p=w();oe(p,([o])=>{if(_.value=o.isIntersecting,!_.value)return;n.intersectingSubcategory=t.name;const C=o.target.getElementsByClassName("seventv-settings-node");for(const d of Array.from(C)){const b=d.getAttribute("data-key");b&&n.markSettingAsSeen(b)}},{threshold:.75,rootMargin:"0px 0px -50% 0px"});function S(o){l.value.delete(o),n.markSettingAsSeen(o)}function v(){var o;(o=p.value)==null||o.scrollIntoView({block:"start"})}return e({name:t.name,scrollIntoView:v}),(o,C)=>(r(),a("div",{ref_key:"catRef",ref:p,sticky:_.value,class:"seventv-settings-view-subcategory"},[o.name?(r(),a("h3",{key:0,id:o.name,ref:"subcategoryRefs",class:"seventv-settings-subcategory-header"},f(o.name),9,ye)):h("",!0),(r(!0),a($,null,T(o.nodes,d=>(r(),G(ee,{key:d.key,node:d,unseen:l.value.has(d.key),onSeen:b=>S(d.key)},null,8,["node","unseen","onSeen"]))),128))],8,we))}});const Ce=m(Se,[["__scopeId","data-v-0d5231ad"]]),be={key:0,class:"seventv-settings-view-container"},Ve=y({__name:"SettingsViewConfig",setup(s){const e=O(),t=w([]);return V(()=>e.scrollpoint,()=>{var n;(n=t.value.find(l=>l.name==e.scrollpoint))==null||n.scrollIntoView()}),(n,l)=>u(e).mappedNodes[u(e).category]?(r(),a("div",be,[g(D,null,{default:P(()=>[(r(!0),a($,null,T(Object.entries(u(e).mappedNodes[u(e).category]),([_,p])=>(r(),a("div",{key:_,class:"seventv-settings-subcategory"},[g(Ce,{ref_for:!0,ref_key:"subCats",ref:t,name:_,nodes:p},null,8,["name","nodes"])]))),128))]),_:1})])):h("",!0)}});const Ie=m(Ve,[["__scopeId","data-v-c77af354"]]),ke={},xe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"1em",height:"1em",fill:"currentColor"},Ee=c("path",{d:"M0 480H144 512 640V352c0-59.6-40.8-109.8-96-124V192c0-53-43-96-96-96c-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32C167.6 32 96 103.6 96 192v8.2C40.1 220 0 273.3 0 336V480z"},null,-1),Ae=[Ee];function $e(s,e){return r(),a("svg",xe,Ae)}const Te=m(ke,[["render",$e]]),Pe={class:"seventv-settings-home"},Ne={class:"seventv-settings-home-body"},Re={class:"seventv-settings-home-changelog"},Le={class:"seventv-settings-home-footer"},De={class:"seventv-settings-app-info"},Oe={class:"seventv-settings-compact"},Be={class:"seventv-version"},Ue={key:0,class:"seventv-version-remote"},je={class:"seventv-settings-compact"},qe=["data-height","data-theme"],He=y({__name:"SettingsViewHome",setup(s){const{theme:e}=Q(J()),{browser:t}=R(),n="7TV",l={}.VITE_APP_CONTAINER??"Extension",_="https://7tv.io/v3",p="3.0.14",S=seventv.remote||!1,v=w(null);return K(()=>{if(t.name==="Firefox")return;const o=document.createElement("script");o.async=!0,o.setAttribute("src","https://platform.twitter.com/widgets.js"),o.setAttribute("charset","utf-8"),document.head.appendChild(o)}),(o,C)=>{const d=W("tooltip");return r(),a("div",Pe,[c("div",Ne,[g(D,null,{default:P(()=>[c("div",Re,[g(te)])]),_:1}),c("div",Le,[c("div",De,[c("span",Oe,f(u(n))+" ("+f(u(l))+")",1),c("span",Be,[c("span",null,"v"+f(u(p)),1),u(S)?Y((r(),a("span",Ue,[g(Te)])),[[d,"Running in Hosted Mode"]]):h("",!0)]),c("span",je,"API: "+f(u(_)),1)])])]),c("div",{ref_key:"sidebarEl",ref:v,class:"seventv-settings-home-sidebar seventv-settings-compact"},[v.value?(r(),a("a",{key:0,class:"twitter-timeline",noscrollbar:"1",noborders:"1",transparent:"1","data-chrome":"noheader nofooter noborders noscrollbar transparent","data-tweet-limit":10,"data-height":v.value.offsetHeight,"data-theme":u(e).toLowerCase(),href:"https://twitter.com/Official_7TV?ref_src=twsrc%5Etfw"},null,8,qe)):h("",!0)],512)])}}});const Me=m(He,[["__scopeId","data-v-8639728b"]]),ze={key:0},Fe=y({__name:"SettingsViewProfile",setup(s){const e=ie();return(t,n)=>u(e).user?(r(),a("div",ze,"Hello "+f(u(e).user.display_name),1)):h("",!0)}});const Ge=m(Fe,[["__scopeId","data-v-b8ec8afd"]]),Qe=N(()=>L(()=>import("./seventv.PaintTool.3.0.14.js"),["./seventv.PaintTool.3.0.14.js","./seventv.index.3.0.14.js","./seventv.useUserAgent.3.0.14.js","./seventv.CloseIcon.3.0.14.js","./seventv.main.3.0.14.js","./seventv.ChevronIcon.3.0.14.js","./seventv.v4.3.0.14.js","./seventv.ChatMessage.3.0.14.js","./seventv.StoreSubscribeButton.3.0.14.js","./seventv.UiFloating.3.0.14.js","./seventv.index.3.0.143.js"],import.meta.url)),Ke=N(()=>L(()=>import("./seventv.Store.3.0.14.js"),["./seventv.Store.3.0.14.js","./seventv.index.3.0.14.js","./seventv.useUserAgent.3.0.14.js"],import.meta.url));class We{constructor(){i(this,"open",!1);i(this,"view",null);i(this,"category","");i(this,"scrollpoint","");i(this,"intersectingSubcategory","");i(this,"seen",[]);i(this,"mappedNodes",I({Home:{}}));this.switchView("home");const e=localStorage.getItem(k.SEEN_SETTINGS);if(e)for(const t of e.split(","))this.seen.push(t)}toggle(){this.open=!this.open}switchView(e){this.view=Z(Ye[e])}markSettingAsSeen(...e){for(const t of e)this.seen.indexOf(t)===-1&&this.seen.push(t);localStorage.setItem(k.SEEN_SETTINGS,this.seen.join(","))}}const Ye={home:Me,config:Ie,profile:Ge,compat:ge,store:Ke,paint:Qe},Xe=I(new We);function O(){return Xe}export{at as D,O as a,ie as u};
