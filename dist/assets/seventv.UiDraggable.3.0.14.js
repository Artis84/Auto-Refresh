import{_ as x,l as w,f as y,j as p,e as M,aI as k,d as C,a as E,aR as T,w as D,o as L,at as S,aS as g}from"./seventv.index.3.0.14.js";import{k as $,o as O}from"./seventv.index.3.0.143.js";import{r as f,b as R}from"./seventv.useUserAgent.3.0.14.js";const z={},F={width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"currentColor"},H=p("g",null,[p("path",{d:"M8.5 10L4 5.5 5.5 4 10 8.5 14.5 4 16 5.5 11.5 10l4.5 4.5-1.5 1.5-4.5-4.5L5.5 16 4 14.5 8.5 10z"})],-1),I=[H];function N(v,_){return w(),y("svg",F,I)}const X=x(z,[["render",N]]),U=M({__name:"UiDraggable",props:{initialPosition:{},initialAnchor:{},initialMiddleware:{},initialPlacement:{},emitClickout:{type:Boolean},handle:{},once:{type:Boolean}},emits:["clickout"],setup(v,{emit:_}){const e=v,n=f(),A=[k({crossAxis:!0,mainAxis:!0})],b=C(()=>e.handle??n.value);let h;const r=f(0),c=f(0);async function s(t,i){if(!n.value)return;const l=Symbol();h=l;const{x:d,y:m}=await g({getBoundingClientRect(){return{width:0,height:0,x:t,y:i,top:i,left:t,right:t,bottom:i}},contextElement:e.initialAnchor instanceof HTMLElement?e.initialAnchor:void 0},n.value,{middleware:A,placement:"bottom-start"});h===l&&(r.value=d,c.value=m)}async function B(t){if(!n.value)return;const{x:i,y:l}=await g(t,n.value,{middleware:e.initialMiddleware,placement:e.initialPlacement});await s(i,l)}let u;$(n,{onMove({x:t,y:i}){u||window.requestAnimationFrame(()=>{s(t,i),u=void 0})},handle:b,preventDefault:!0});let a;E(()=>[n.value,e.initialPosition,e.initialMiddleware,e.initialPlacement],()=>{a==null||a(),a=void 0;const t=n.value;if(!t)return;let i=!0;a=T({getBoundingClientRect(){return{width:0,height:0,x:r.value,y:c.value,top:c.value,left:r.value,right:r.value,bottom:c.value}},contextElement:e.initialAnchor instanceof HTMLElement?e.initialAnchor:void 0},t,()=>{var l,d;if(i){if(e.initialAnchor)B(e.initialAnchor);else{const m=((l=e.initialPosition)==null?void 0:l[0])??0,P=((d=e.initialPosition)==null?void 0:d[1])??0;s(m,P)}i=!1}else e.once||s(r.value,c.value)})},{immediate:!0});let o;return D(()=>{o==null||o(),o=void 0,e.emitClickout&&(o=O(n.value,t=>_("clickout",t)))}),L(()=>{a==null||a(),o==null||o(),u&&cancelAnimationFrame(u)}),(t,i)=>(w(),y("div",{ref_key:"el",ref:n,class:"draggable-container",style:R({top:`${c.value}px`,left:`${r.value}px`})},[S(t.$slots,"default",{},void 0,!0)],4))}});const Y=x(U,[["__scopeId","data-v-8dac15e8"]]);export{X as T,Y as U};
